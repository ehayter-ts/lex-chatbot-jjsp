metadata={systemName:"AWS_Lex_ChatBot",displayName:"AWS Lex ChatBot Broker",description:"AWS Lex ChatBot Broker",configuration:{AwsRegion:{displayName:"AWS Region",type:"string",value:"eu-west-2"},BotName:{displayName:"Bot Name",type:"string",value:"MedicalBotNHS"},BotAlias:{displayName:"Bot Name",type:"string",value:"latestversion"},UserID:{displayName:"User ID",type:"string",value:"AKIARXLDA4AZB24QPA72"}}},ondescribe=async function({configuration:e}){postSchema({objects:{message:{displayName:"Message",description:"Represents a text reply",properties:{inputText:{displayName:"Input Text",type:"string"},outputText:{displayName:"Output Text",type:"string"}},methods:{postText:{displayName:"Post Text",type:"execute",inputs:["inputText"],outputs:["outputText"]}}}}})},onexecute=async function({objectName:e,methodName:t,parameters:a,properties:s,configuration:n,schema:o}){switch(e){case"message":await async function(e,t,a,s){switch(e){case"postText":await function(e,t){return new Promise((a,s)=>{var n=new XMLHttpRequest;n.onreadystatechange=function(){try{if(4!==n.readyState)return;if(200!==n.status)throw new Error("Failed with status "+n.status+" "+n.responseText);JSON.parse(n.responseText),postResult({outputText:"Test"}),a()}catch(e){s(e)}};var o,i={inputText:e.inputText.toString()},r=JSON.stringify(i);n.open("POST",`https://runtime.lex.${t.AwsRegion}.amazonaws.com/bot/${t.BotName}/alias/${t.BotAlias}/user/${t.UserID}/text`),n.setRequestHeader("Authorization",`AWS4-HMAC-SHA256 Credential=${t.UserID}/20201021/${t.AwsRegion}/lex/aws4_request, SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=dc6f5ddf6df53218de4142803eadfe8649f6e718a2d7b01a3e509bb8452fb52e`),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("X-Amz-Date",(o=new Date).getFullYear().toString()+("0"+(o.getMonth()+1)).slice(-2).toString()+("0"+o.getDate()).slice(-2)+"T"+("0"+o.getHours()).slice(-2)+("0"+o.getMinutes()).slice(-2)+"1Z"),n.setRequestHeader("X-Amz-Content-Sha256","beaead3198f7da1e70d03ab969765e0821b24fc913697e929e726aeaebf0eba3"),n.setRequestHeader("Content-Length",r.length.toString()),n.send(r)})}(t,s);break;default:throw new Error("The method "+e+" is not supported.")}}(t,s,0,n);break;default:throw new Error("The object "+e+" is not supported.")}};
//# sourceMappingURL=index.js.map
